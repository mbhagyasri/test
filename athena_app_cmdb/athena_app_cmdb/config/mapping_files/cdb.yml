paths:
  /cdb/blueprints:
    model: blueprints
    post:
      required_inputs:
        name:
          type: string
      optional_inputs:
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
          example: Fireman's Fund Insurance Company
  /cdb/blueprints/:id:
    model: blueprints
    put:
      required_inputs:
        name:
          type: string
      optional_inputs:
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
          example: Fireman's Fund Insurance Company
  /cdb/cloud_accounts_nsxt:
    model: cloud_accounts_nsxt
    post:
      required_inputs:
        name:
          type: string
        organization:
          type: uuid
        nsxt_manager:
          type: uuid
      optional_inputs:
        id:
          type: uuid
        cloud_proxy:
          type: uuid
        cloud_proxy_name:
          type: lookup_field
          model: cloud_proxies
          lookup_key: name
          src_key: id
          dst_key: cloud_proxy
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
        nsxt_manager_name:
          type: lookup_field
          model: resources
          lookup_key: name
          src_key: id
          dst_key: nsxt_manager
  /cdb/cloud_accounts_nsxt/:id:
    model: cloud_accounts_nsxt
    put:
      required_inputs:
        name:
          type: string
        organization:
          type: uuid
        nsxt_manager:
          type: uuid
      optional_inputs:
        id:
          type: uuid
        cloud_proxy_name:
          type: lookup_field
          model: cloud_proxies
          lookup_key: name
          src_key: id
          dst_key: cloud_prox
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
        nsxt_manager_name:
          type: lookup_field
          model: resources
          lookup_key: name
          src_key: id
          dst_key: nsxt_manager
  /cdb/cloud_accounts_vsphere:
    model: cloud_accounts_vsphere
    post:
      required_inputs:
        name:
          type: string
        organization:
          type: uuid
        vcenter:
          type: uuid
        properties.cas.regions:
          type: array
      optional_inputs:
        id:
          type: uuid
        cloud_proxy:
          type: uuid
        cloud_proxy_name:
          type: lookup_field
          model: cloud_proxies
          lookup_key: name
          src_key: id
          dst_key: cloud_proxy
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
        vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: vcenter
  /cdb/cloud_accounts_vsphere/:id:
    model: cloud_accounts_vsphere
    put:
      required_inputs:
        name:
          type: string
        organization:
          type: uuid
        vcenter:
          type: uuid
        properties.regions:
          type: array
      optional_inputs:
        cloud_proxy:
          type: uuid
        cloud_proxy_name:
          type: lookup_field
          model: cloud_proxies
          lookup_key: name
          src_key: id
          dst_key: cloud_proxy
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
        vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: vcenter
  /cdb/cloud_zones:
    post:
      required_inputs:
        name:
          type: string
        hypervisor_cluster:
          type: uuid
        organization:
          type: uuid
      optional_inputs:
        hypervisor_name:
          type: lookup_field
          model: hypervisor_clusters
          lookup_key: name
          src_key: id
          dst_key: hypervisor_cluster
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
  /cdb/cloud_zones/:id:
    put:
      required_inputs:
        name:
          type: string
        hypervisor_cluster:
          type: uuid
        organization:
          type: uuid
      optional_inputs:
        hypervisor_name:
          type: lookup_field
          model: hypervisor_clusters
          lookup_key: name
          src_key: id
          dst_key: hypervisor_cluster
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
  /cdb/deployments:
    post:
      required_inputs:
        name:
          type: string
        pod:
          type: uuid
        organization:
          type: uuid
        projectId:
          type: uuid
        properties.last_snapshot:
          type: hash
        status:
          type: string
      optional_inputs:
        properties.last_snapshot.orgId:
          type: lookup_field
          model: organizations
          lookup_key: properties.cas.orgId
          src_key: id
          dst_key: organization
        lastEventType:
          type: string
        lastEventTopic:
          type: string
        lastActionName:
          type: string
        pod_name:
          type: lookup_field
          model: pods
          lookup_key: name
          src_key: id
          dst_key: pod
  /cdb/hypervisor_clusters:
    model: hypervisor_clusters
    post:
      required_inputs:
        name:
          type: string
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
          maintenance:
            type: boolean
            default: false
        vcenter:
          type: uuid
      optional_inputs:
        id:
          type: uuid
        vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: vcenter
  /cdb/hypervisor_clusters/:id:
    model: hypervisor_clusters
    put:
      required_inputs:
        name:
          type: string
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
          maintenance:
            type: boolean
            default: false
        vcenter:
          type: uuid
      optional_inputs:
        vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: vcenter
  /cdb/managed_options:
    post:
      required_inputs:
        name:
          type: string
  /cdb/managed_options/:id:
    put:
      required_inputs:
        name:
          type: string
  /cdb/organizations:
    model: organizations
    post:
      required_inputs:
        name:
          type: string
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
        properties.friendly_name:
          type: string
        properties.customer_type:
          type: string
          default: External
          choices:
            - Internal
            - External

      optional_inputs:
        properties.att_sddc.tenant_id:
          type: string
        properties.cpss.customer_id:
          type: string
        properties.pcdk.id:
          type: string
        properties.cas.orgId:
          type: string
        properties.cas.auth.sr2api.id:
          type: string
        properties.cas.auth.sr2api.secret:
          type: password
        properties.cas.auth.cps_shared_services.id:
          type: string
        properties.cas.auth.cps_shared_services.secret:
          type: password
  /cdb/organizations/:id:
    model: organizations
    put:
      required_inputs:
        name:
          type: string
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
        properties.friendly_name:
          type: string
      optional_inputs:
        properties.cas.orgId:
          type: string
        properties.cas.auth.sr2api.id:
          type: string
        properties.cas.auth.sr2api.secret:
          type: password
        properties.cas.auth.cps_shared_services.id:
          type: string
        properties.cas.auth.cps_shared_services.secret:
          type: password
  /cdb/organizations/:id/associations/hypervisor_clusters/:id:
    post:
      description: "Assign a dedicated hypervisor cluster to an organization."
    delete:
      description: "Remove the association of the hypervisor cluster to the organization."
  /cdb/pods:
    model: pods
    post:
      required_inputs:
        name:
          type: string
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
        maintenance:
          type: boolean
          default: false
        properties.short_name:
          type: string
      optional_inputs:
        id:
          type: uuid
        properties.proxy:
          type: string
    get:
      response:
        - id
        - name
        - status
        - maintenance
        - properties
        - last_updated_at
        - last_updated_by
        - last_created_at
  /cdb/pods/:id:
    put:
      required_inputs:
        name:
          type: string
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
        maintenance:
          type: boolean
          default: false
      optional_inputs:
          properties.country:
            type: string
          properties.address:
            type: string
          properties.description:
            type: string
  /cdb/projects:
    post:
      required_inputs:
        name:
          type: string
        id:
          type: uuid
        organization:
          type: uuid
      optional_inputs:
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
        properties.cas.orgId:
          type: lookup_field
          model: organizations
          lookup_key: properties.cas.orgId
          src_key: id
          dst_key: organization
  /cdb/projects/:id:
    put:
      required_inputs:
        name:
          type: string
        id:
          type: uuid
        organization:
          type: uuid
        properties.cas:
          type: hash
        status:
          type: string
      optional_inputs:
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
        properties.cas.orgId:
          type: lookup_field
          model: organizations
          lookup_key: properties.cas.orgId
          src_key: id
          dst_key: organization
  /cdb/protection_groups:
    model: protection_groups
    post:
      required_inputs:
        name:
          type: string
          example: gold
        parent_vcenter:
          type: uuid
        organization:
          type: uuid
        properties.default_protection_group:
          type: boolean
          default: false
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - retired
      optional_inputs:
        parent_vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: parent_vcenter
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
  /cdb/protection_groups/:id:
    model: protection_groups
    put:
      required_inputs:
        name:
          type: string
          example: gold
        parent_vcenter:
          type: uuid
        organization:
          type: uuid
        properties.default_protection_group:
          type: boolean
          default: false
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - retired
      optional_inputs:
        parent_vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: parent_vcenter
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
  /cdb/resources:
    model: resources
    post:
      required_inputs:
        name:
          type: string
          example: vm-123
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
            - FAILED
        pod:
          type: uuid
        properties.roles:
          type: array
          example: jumpserver
      optional_inputs:
        properties.auth:
          type: hash
        properties.os_version:
          type: string
        properties.management_url:
          type: string
        organization:
          type: uuid
          example: 05b82e01-2e03-48ec-b329-6c7327d1a40e
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
          example: Fireman's Fund Insurance Company
        parent_vcenter:
          type: uuid
          example: 695567b7-9f5d-4382-b611-75dc5757fc45
        parent_vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: parent_vcenter
          ignore_failure: "True"
          example: vcsa-123-01
        parent_resource:
          type: uuid
          example: 695567b7-9f5d-4382-b611-75dc5757fc45
        parent_resource_name:
          type: lookup_field
          model: resources
          lookup_key: name
          src_key: id
          dst_key: parent_resource
          example: cntcluster
        pod_name:
          type: lookup_field
          model: pods
          lookup_key: name
          src_key: id
          dst_key: pod
        properties.management_ip_address:
          type: ip_address
        properties.fqdn:
          type: string
        properties.os_type:
          type: string
          choices:
            - windows
            - linux
            - other
            - WINDOWS
            - LINUX
        hypervisor_cluster_name:
          type: lookup_field
          model: hypervisor_clusters
          lookup_key: name
          src_key: id
          dst_key: hypervisor_cluster
        cloud_account_vsphere_name:
          type: lookup_field
          model: cloud_accounts_vsphere
          lookup_key: name
          src_key: vcenter
          dst_key: parent_vcenter
          ignore_failure: "True"
        cloud_account_nsxt_name:
          type: lookup_field
          model: cloud_accounts_nsxt
          lookup_key: name
          src_key: nsxt_manager
          dst_key: parent_resource
          ignore_failure: "True"
  /cdb/resources/:id:
    model: resources
    put:
      required_inputs:
        name:
          type: string
          example: vm-123
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
            - FAILED
        pod:
          type: uuid
        properties:
          type: hash
        properties.roles:
          type: array
          example: windows jumpserver

      optional_inputs:
        properties.networks.0.gateway:
          type: ip_address
        properties.networks.0.subnet_mask:
          type: ip_address
        properties.networks.0.vlan:
          type: integer
        properties.auth:
          type: hash
        properties.os_version:
          type: string
        properties.management_url:
          type: string
        organization:
          type: uuid
          example: 05b82e01-2e03-48ec-b329-6c7327d1a40e
        organization_name:
          type: lookup_field
          model: organizations
          lookup_key: name
          src_key: id
          dst_key: organization
          example: Fireman's Fund Insurance Company
        parent_vcenter:
          type: uuid
          example: 695567b7-9f5d-4382-b611-75dc5757fc45
        parent_vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: parent_vcenter
          example: vcsa-123-01
        parent_resource:
          type: uuid
          example: 695567b7-9f5d-4382-b611-75dc5757fc45
        parent_resource_name:
          type: lookup_field
          model: resources
          lookup_key: name
          src_key: id
          dst_key: parent_resource
          example: cntcluster
        hypervisor_cluster_name:
          type: lookup_field
          model: hypervisor_clusters
          lookup_key: name
          src_key: id
          dst_key: hypervisor_cluster
        pod_name:
          type: lookup_field
          model: pods
          lookup_key: name
          src_key: id
          dst_key: pod
        properties.networks:
          type: hash
        properties.networks.0.ip_address:
          type: ip_address
        properties.management_ip_address:
          type: ip_address
        properties.fqdn:
          type: string
        properties.os_type:
          type: string
          choices:
            - windows
            - linux
            - other
            - LINUX
            - WINDOWS
        cloud_account_vsphere_name:
          type: lookup_field
          model: cloud_accounts_vsphere
          lookup_key: name
          src_key: vcenter
          dst_key: parent_vcenter
          ignore_failure: "True"
        cloud_account_nsxt_name:
          type: lookup_field
          model: cloud_accounts_nsxt
          lookup_key: name
          src_key: nsxt_manager
          dst_key: parent_resource
          ignore_failure: "True"
  /cdb/software_addons:
    model: software_addons
    post:
      required_inputs:
        name:
          type: string
          example: nagios
        managed_option:
          type: uuid
        properties:
          type: hash
      optional_inputs:
        managed_option_name:
          type: lookup_field
          model: managed_options
          lookup_key: name
          src_key: id
          dst_key: managed_option
        properties:
          type: hash
        properties.filename:
          type: string
  /cdb/software_addons/:id:
    model: software_addons
    put:
      required_inputs:
        name:
          type: string
          example: nagios
        managed_option:
          type: uuid
        properties:
          type: hash
      optional_inputs:
        managed_option_name:
          type: lookup_field
          model: managed_options
          lookup_key: name
          src_key: id
          dst_key: managed_option
        properties:
          type: hash
        properties.filename:
          type: string
  /cdb/vcenters:
    post:
      required_inputs:
        name:
          type: string
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
        pod:
          type: uuid
        maintenance:
          type: boolean
          default: false
        properties.management_ip_address:
          type: string
        properties.cloud_platform:
          type: string
          choices:
            - multi-tenant
            - private_cloud
            - msvmc_private_cloud
          default: private_cloud
        properties.tenancy_type:
            type: related_field
            choices:
              - dedicated
              - shared
            related_field_key: properties.cloud_platform
            set_value:
                multitenant: shared
                private_cloud: dedicated
                msvmc_private_cloud: dedicated
            default: dedicated
        properties.roles:
          type: string
          choices:
            - management
            - compute
      optional_inputs:
        id:
          type: uuid
        pod_name:
          type: lookup_field
          model: pods
          lookup_key: name
          src_key: id
          dst_key: pod
        nsxt_manager_name:
          type: lookup_field
          model: resources
          lookup_key: name
          src_key: id
          dst_key: nsxt_manager
        parent_vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: parent_vcenter
        srm_partner_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: srm_partner
  /cdb/vcenters/:id:
    put:
      required_inputs:
        name:
          type: string
        status:
          type: string
          default: active
          choices:
            - build_in_progress
            - active
            - out_of_service
            - move_to_production
            - retired
        pod:
          type: uuid
        maintenance:
          type: boolean
          default: false
        properties.management_ip_address:
          type: string
        properties.cloud_platform:
          type: string
          choices:
            - multi-tenant
            - private_cloud
            - msvmc_private_cloud
          default: private_cloud
        properties.tenancy_type:
          type: related_field
          choices:
            - dedicated
            - shared
          related_field_key: properties.cloud_platform
          set_value:
            multitenant: shared
            private_cloud: dedicated
            msvmc_private_cloud: dedicated
          default: dedicated
        properties.roles:
          type: string
          choices:
            - management
            - compute
      optional_inputs:
        pod_name:
          type: lookup_field
          model: pods
          lookup_key: name
          src_key: id
          dst_key: pod
        nsxt_manager_name:
          type: lookup_field
          model: resources
          lookup_key: name
          src_key: id
          dst_key: nsxt_manager
        parent_vcenter_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: parent_vcenter
        srm_partner_name:
          type: lookup_field
          model: vcenters
          lookup_key: name
          src_key: id
          dst_key: srm_partner









